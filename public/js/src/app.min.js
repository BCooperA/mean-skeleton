function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}!function(){"use strict";function e(e,t,a,n,r,o,c){e.errorOnUnhandledRejections(!1),r.interceptors.push("StatusInterceptor"),n.html5Mode(!0).hashPrefix("!"),o.useStaticFilesLoader({prefix:"/angular/languages/",suffix:".json"}),o.preferredLanguage("en"),o.useSanitizeValueStrategy("escape");for(var i=0;i<c.length;i++)t.state(c[i].name,c[i].value);a.otherwise("/account/login")}function t(o,e,c,t,i,a,s,n){var r=navigator.language.substring(0,2)||navigator.userLanguage.substring(0,2);0===r.length&&""===r||localStorage.setItem("lang",r),o.$state=i,o.$stateParams=a,"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),t.get("user")&&(c.currentUser=JSON.parse(t.get("user")),t.remove("user")),c.currentUser&&(e.defaults.headers.common.Authorization="Bearer "+c.currentUser.token),o.$on("$stateChangeStart",function(e,t,a,n,r){!t.authenticate||c.currentUser&&!s.isTokenExpired(c.currentUser.token)||(e.preventDefault(),i.go("account.login"))}),o.$on("$stateChangeSuccess",function(e,t,a,n,r){o.previousState_name=n.name,o.previousState_params=r,o.title=t.title})}e.$inject=["$qProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$translateProvider","stateList"],t.$inject=["$rootScope","$http","$localStorage","$cookies","$state","$stateParams","jwtHelper","$location"],angular.module("app",["ui.router","ngAnimate","ngStorage","ngCookies","angular-jwt","inform","pascalprecht.translate"]).config(e).run(t)}(),function(){"use strict";angular.module("app").constant("stateList",[{name:"dashboard",value:{abstract:!0,templateUrl:"/angular/app-components/dashboard/dashboard.view.html",controller:"Dashboard.IndexController",controllerAs:"vm",authenticate:!0}},{name:"dashboard.app",value:{title:"Dashboard",url:"/app/dashboard",templateUrl:"/angular/app-components/dashboard/app/index.view.html",authenticate:!0}},{name:"dashboard.profile",value:{title:"Profile",url:"/app/account/:id",templateUrl:"/angular/app-components/dashboard/profile/index.view.html",controller:"Profile.IndexController",controllesAs:"vm",authenticate:!0}},{name:"dashboard.messages",value:{title:"Messages",url:"/app/messages",templateUrl:"/angular/app-components/dashboard/messages/index.view.html",controller:"Messages.IndexController",controllerAs:"vm",authenticate:!0}},{name:"dashboard.search",value:{title:"Search",url:"/app/search/:keyword",templateUrl:"/angular/app-components/dashboard/search/index.view.html",authenticate:!0}},{name:"account",value:{templateUrl:"/angular/app-components/auth/index.view.html",abstract:!0}},{name:"account.login",value:{title:"Sign in",url:"/account/login",templateUrl:"/angular/app-components/auth/login/index.view.html",controllerAs:"vm",controller:"Login.IndexController"}},{name:"account.signup",value:{title:"Sign up",url:"/account/signup",templateUrl:"/angular/app-components/auth/signup/index.view.html",controllerAs:"vm",controller:"SignUp.IndexController"}},{name:"account.verify",value:{title:"Verify account",url:"/account/verify",templateUrl:"/angular/app-components/auth/signup/verify-email/index.view.html"}},{name:"account.recover",value:{title:"Recover account",url:"/account/recover",templateUrl:"/angular/app-components/auth/password/recover/index.view.html",controller:"Password.IndexController",controllerAs:"vm",data:{cssClassNames:"unauth"}}},{name:"account.reset",value:{title:"Reset account",url:"/account/reset/:token",templateUrl:"/angular/app-components/auth/password/reset/index.view.html",controller:"Password.IndexController",controllerAs:"vm"}}])}(),function(){"use strict";function e(t,a){a.changeLanguage=function(e){a.loading=!0,localStorage.removeItem("lang"),localStorage.setItem("lang",e),t.use(e),a.loading=!1}}e.$inject=["$translate","$scope"],angular.module("app").controller("MainController",e).controller.$inject=["$translate","$scope"]}(),function(){"use strict";function e(e,t,a,n,r,o){var c=this;c.searchText=null,c.search=function(){if(3<=c.searchText.length){var e=c.searchText;SearchService.getByKeyword(e).then(function(e){c.searchResults=e,n.go("dashboard.search")})}else n.go("dashboard.app")},c.logOut=function(){t.Logout(),o.bodylayout="",n.go("account.login")},a.getUser(r.currentUser.id).then(function(e){c.user=e}),o.bodylayout="dashboard"}e.$inject=["$http","AuthenticationService","AccountService","$state","$localStorage","$rootScope"],angular.module("app").controller("Dashboard.IndexController",e).controller.$inject=["$http","AuthenticationService","AccountService","$state","$localStorage","$rootScope"]}(),function(){"use strict";function e(e,t,a,n,r,o){var c=this;c.login=function(){c.loading=!0,t.Login(c.email,c.password,function(e){!0===e&&o.go("dashboard.app")}),c.loading=!1},t.Logout()}e.$inject=["$location","AuthenticationService","$timeout","$translate","$localStorage","$state"],angular.module("app").controller("Login.IndexController",e).controller.$inject=["$location","AuthenticationService","$timeout","$translate","$localStorage","$state"]}(),function(){"use strict";function e(e,t,a){var n=this;n.recover=function(){n.loading=!0,n.mailSent=!1,n.mailSentMsg="",a.recoverPassword(n.email,function(e){!0===e&&(n.mailSent=!0,n.mailSentMsg="A link to reset your password has been sent to provided e-mail address."),n.loading=!1})},n.reset=function(){n.loading=!0,a.resetPassword(e.params.token,n.password,function(e){e&&(n.passwordReset=!0,n.passwordResetMsg="Your password is now changed"),n.loading=!1})}}e.$inject=["$state","$location","AuthenticationService"],angular.module("app").controller("Password.IndexController",e).controller.$inject=["$state","$location","AuthenticationService"]}(),function(){"use strict";function e(t,e){var a=this;a.signUp=function(){a.loading=!0,a.name=a.firstName+" "+a.surName,e.SignUp(a.email,a.name,a.password,function(e){!0===e&&(t.go("account.verify"),a.loading=!1)})}}e.$inject=["$state","AuthenticationService"],angular.module("app").controller("SignUp.IndexController",e).controller.$inject=["$state","AuthenticationService"]}(),function(){"use strict";function e(e,t){var a=this;console.log("HEllo!"),a.message="Hello!"}e.$inject=["$localStorage","AccountService"],angular.module("app").controller("Messages.IndexController",e).controller.$inject=["$localStorage","AccountService"]}(),function(){"use strict";function e(e,t,a){var n=this;e.getUser(t.id).then(function(e){n.user=e,a.title=n.user.name})}e.$inject=["AccountService","$stateParams","$rootScope"],angular.module("app").controller("Profile.IndexController",e).controller.$inject=["AccountService","$stateParams","$rootScope"]}(),function(){"use strict";function e(t,a){var n=this;n.searchText=null,n.search=function(){if(3<=n.searchText.length){var e=n.searchText;t.getByKeyword(e).then(function(e){n.searchResults=e,a.go("dashboard.search")})}else a.go("dashboard.app")}}e.$inject=["SearchService","$state"],angular.module("app").controller("Search.IndexController",e).controller.$inject=["SearchService","$state"]}(),function(){"use strict";function e(r){return{restrict:"A",scope:{},link:function(e,t,a){e.tgl=function(){t.attr("type","text"===t.attr("type")?"password":"text")};var n=angular.element('<a class="errspan" data-ng-click="tgl()"></a>');r(n)(e),t.wrap('<div class="password-toggle"/>').after(n)}}}e.$inject=["$compile"],angular.module("app").directive("passwordToggle",e).directive.$inject=["$compile"]}(),function(){"use strict";angular.module("app").directive("sameAs",function(){return{require:"ngModel",link:function(a,e,n,r){r.$parsers.unshift(function(e){var t=a.$eval(n.sameAs)==e;return r.$setValidity("same-as",t),t?e:void 0}),a.$watch(n.sameAs,function(){r.$setViewValue(r.$viewValue)})}}})}(),function(){"use strict";function e(r,o){return{require:"ngModel",link:function(e,t,a,n){n.$asyncValidators.emailExists=function(e,t){return r.post("/account/email",{user:{email:t}}).then(function(e){return!1!==e.data.valid||o.reject()})}}}}e.$inject=["$http","$q"],angular.module("app").directive("uniqueEmail",e).directive.$inject=["$http","$q"]}(),function(){"use strict";function e(t){var e={getUser:function(e){return t.get("/api/user/"+e).then(function(e){if(e.data)return e.data})}};return e}e.$inject=["$http"],angular.module("app").factory("AccountService",e).factory.$inject=["$http"]}(),function(){"use strict";function e(r,n){var e={Login:function(e,t,a){r.post("/auth/signin",{user:{email:e,password:t}}).then(function(e){return 200==e.status&&e.data.user.token?(n.currentUser={id:e.data.user._id,token:e.data.user.token},r.defaults.headers.common.Authorization="Bearer "+e.data.user.token,a(!0)):a(!1)})},Logout:function(){delete n.currentUser,r.defaults.headers.common.Authorization=""},SignUp:function(e,t,a,n){r.post("/api/users",{user:{email:e,name:t,password:a}}).then(function(e){return 200===e.status&&"OK"===e.data.status?n(!0):n(!1)})},recoverPassword:function(e,t){r.put("/account/password/recover",{user:{email:e}}).then(function(e){return 200===e.status&&"OK"===e.data.status?t(!0):t(!1)})},resetPassword:function(e,t,a){r.put("/account/password/reset/"+e,{user:{password:t}}).then(function(e){return 200===e.status&&"OK"===e.data.status?a(!0):a(!1)})}};return e}e.$inject=["$http","$localStorage"],angular.module("app").factory("AuthenticationService",e).factory.$inject=["$http","$localStorage"]}(),function(){"use strict";function e(a,e,n,t,r){return{response:function(e){return e||a.when(e)},responseError:function(t){return 401==t.status&&(n.bodyLayout="",e.path("/account/login")),422==t.status&&angular.forEach(t.data.errors,function(e){r.add(capitalizeFirstLetter(Object.keys(t.data.errors)[0]+" "+e),{type:"alert alert-danger"})}),a.reject(t)}}}e.$inject=["$q","$location","$rootScope","$injector","inform"],angular.module("app").factory("StatusInterceptor",e).factory.$inject=["$q","$location","$rootScope","$injector","inform"]}(),function(){"use strict";function e(a){var e={getByKeyword:function(e){return a.post("/api/search/"+e).then(n,(t="Error getting user by id",function(){return{error:!0,message:t}}));var t}};return e;function n(e){return e.data}}e.$inject=["$http"],angular.module("app").factory("SearchService",e).factory.$inject=["$http"]}();