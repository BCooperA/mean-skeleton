function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}!function(){"use strict";function t(t,e,n,a,r,o,i){t.errorOnUnhandledRejections(!1),r.interceptors.push("StatusInterceptor"),a.html5Mode(!0).hashPrefix("!"),o.useStaticFilesLoader({prefix:"/angular/languages/",suffix:".json"}),o.preferredLanguage(localStorage.getItem("lang")),o.useSanitizeValueStrategy("escape");for(var s=0;s<i.length;s++)e.state(i[s].name,i[s].value);n.otherwise("/")}function e(o,t,a,e,n,r,i,s){var u=navigator.language.substring(0,2)||navigator.userLanguage.substring(0,2);0===u.length&&""===u||localStorage.setItem("lang",u),o.$state=n,o.$stateParams=r,"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),e.get("user")&&(a.currentUser=JSON.parse(e.get("user")),e.remove("user")),a.currentUser&&(t.defaults.headers.common.Authorization="Bearer "+a.currentUser.token),o.$on("$locationChangeStart",function(t,e,n){!(-1===["/account/login","/account/","/account/signup","/account/verify","/account/recover","/account/reset/:key"].indexOf(s.path()))||a.currentUser&&!i.isTokenExpired(a.currentUser.token)||s.path("/account/login")}),o.$on("$stateChangeSuccess",function(t,e,n,a,r){o.previousState_name=a.name,o.previousState_params=r,o.title=e.title})}t.$inject=["$qProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$translateProvider","stateList"],e.$inject=["$rootScope","$http","$localStorage","$cookies","$state","$stateParams","jwtHelper","$location"],angular.module("app",["ui.router","ngAnimate","ngStorage","ngCookies","angular-jwt","inform","pascalprecht.translate"]).config(t).run(e)}(),function(){"use strict";function t(t,e,n,a,r,o){var i=this;a.GetById(n.currentUser.id).then(function(t){i.user=t}),i.searchText=null,i.search=function(t){3<=(t=i.searchText).length?e.post("http://localhost:3000/api/search/"+t).then(function(t){i.searchResults=t.data,r.go("dashboard.search")}):r.go("dashboard")},i.logOut=function(){a.Logout(),t.loggedOut=!0,o.path("/account/login")}}t.$inject=["$rootScope","$http","$localStorage","AuthenticationService","$state","$location"],angular.module("app").controller("Dashboard.IndexController",t)}(),function(){"use strict";function t(e,t,n){var a=this;a.login=function(){a.loading=!0,t.Login(a.email,a.password,function(t){!0===t&&e.path("/app/dashboard")}),a.loading=!1},t.Logout()}t.$inject=["$location","AuthenticationService","$timeout"],angular.module("app").controller("Login.IndexController",t)}(),function(){"use strict";function t(t,e){var n=this;n.recover=function(){n.loading=!0,e.recoverPassword(n.email,function(t){t&&(n.mailSent=!0,n.mailSentMsg="A link to reset your password has been sent to provided e-mail address.")}),n.loading=!1},n.reset=function(){},n.mailSent=!1,n.mailSentMsg=""}t.$inject=["$location","AuthenticationService"],angular.module("app").controller("Password.IndexController",t)}(),function(){"use strict";function t(e,t){var n=this;n.signUp=function(){n.loading=!0,n.name=n.firstName+" "+n.surName,console.log(n.name),t.SignUp(n.email,n.name,n.password,function(t){!0===t&&e.path("/account/verify")}),n.loading=!1}}t.$inject=["$location","AuthenticationService"],angular.module("app").controller("SignUp.IndexController",t)}(),function(){"use strict";function t(t){}t.$inject=["$location"],angular.module("app").controller("Messages.IndexController",t)}(),function(){"use strict";function t(t){t.name="Tatu"}t.$inject=["$scope"],angular.module("app").controller("Profile.IndexController",t)}(),function(){"use strict";function t(r,a){var t={Login:function(t,e,n){r.post("/auth/signin",{user:{email:t,password:e}}).then(function(t){return t.data.user.token?(a.currentUser={id:t.data.user._id,token:t.data.user.token},r.defaults.headers.common.Authorization="Bearer "+t.data.user.token,n(!0)):n(!1)})},Logout:function(){delete a.currentUser,r.defaults.headers.common.Authorization=""},SignUp:function(t,e,n,a){r.post("/api/users",{user:{email:t,name:e,password:n}}).then(function(t){return"OK"==t.data.status?a(!0):a(!1)})},recoverPassword:function(t,e){r.put("/auth/password/recover",{user:{email:t}}).then(function(t){return t.data.errors?e(!1):e(!0)})},GetById:function(t){return r.get("/api/user/"+t).then(n,(e="Error getting user by id",function(){return{error:!0,message:e}}));var e}};return t;function n(t){return t.data}}t.$inject=["$http","$localStorage"],angular.module("app").factory("AuthenticationService",t)}(),function(){"use strict";function t(n,t,e,a){return{response:function(t){return t||n.when(t)},responseError:function(e){return 422==e.status&&angular.forEach(e.data.errors,function(t){a.add(capitalizeFirstLetter(Object.keys(e.data.errors)[0]+" "+t),{type:"alert alert-test animated bounceInLeft"})}),n.reject(e)}}}t.$inject=["$q","$location","$injector","inform"],angular.module("app").factory("StatusInterceptor",t)}(),function(){"use strict";function t(r){return{restrict:"A",scope:{},link:function(t,e,n){t.tgl=function(){e.attr("type","text"===e.attr("type")?"password":"text")};var a=angular.element('<a class="errspan" data-ng-click="tgl()"></a>');r(a)(t),e.wrap('<div class="password-toggle"/>').after(a)}}}t.$inject=["$compile"],angular.module("app").directive("passwordToggle",t)}(),function(){"use strict";function t(a){return{restrict:"A",scope:{},link:function(t,s,e,n){a.$on("$stateChangeSuccess",function(t,e,n,a,r){var o=angular.isDefined(a.data)&&angular.isDefined(a.data.cssClassnames)?a.data.cssClassnames:null,i=angular.isDefined(e.data)&&angular.isDefined(e.data.cssClassnames)?e.data.cssClassnames:null;o!=i&&(o&&s.removeClass(o),i&&s.addClass(i))})}}}t.$inject=["$rootScope"],angular.module("app").directive("routeCssClassnames",t)}(),function(){"use strict";angular.module("app").directive("sameAs",function(){return{require:"ngModel",link:function(n,t,a,r){r.$parsers.unshift(function(t){var e=n.$eval(a.sameAs)==t;return r.$setValidity("same-as",e),e?t:void 0}),n.$watch(a.sameAs,function(){r.$setViewValue(r.$viewValue)})}}})}(),function(){"use strict";function t(r,o){return{require:"ngModel",link:function(t,e,n,a){a.$asyncValidators.emailExists=function(t,e){return r.post("/auth/signin/email",{user:{email:e}}).then(function(t){return!1!=!t.data.valid||o.reject(t.data.message)})}}}}t.$inject=["$http","$q"],angular.module("app").directive("uniqueEmail",t)}();