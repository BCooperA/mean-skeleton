function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}!function(){"use strict";function t(t,e,a,n,r,o){t.errorOnUnhandledRejections(!1),r.interceptors.push("StatusInterceptor"),a.otherwise("/"),n.html5Mode(!0).hashPrefix("!"),o.useStaticFilesLoader({prefix:"/angular/languages/",suffix:".json"}),o.preferredLanguage(localStorage.getItem("lang")),e.state("dashboard",{title:"Dashboard",url:"/",templateUrl:"/angular/app-components/dashboard/index.view.html",controller:"Dashboard.IndexController",controllerAs:"vm"}).state("dashboard.search",{title:"Search",url:"search",templateUrl:"/angular/app-components/dashboard/search/index.view.html",controllerAs:"vm",data:{cssClassnames:"search-bg"}}).state("dashboard.profile",{title:"Profile",url:"profile",templateUrl:"/angular/app-components/dashboard/profile/index.view.html",controllerAs:"vm"}).state("dashboard.messages",{title:"Messages",url:"messages",templateUrl:"/angular/app-components/dashboard/messages/index.view.html",controllerAs:"vm"}).state("account",{url:"/account",templateUrl:"/angular/app-components/auth/index.view.html",abstract:!0}).state("account.login",{title:"Sign in",url:"/login",templateUrl:"/angular/app-components/auth/login/index.view.html",controller:"Login.IndexController",controllerAs:"vm",data:{cssClassnames:"unauth"}}).state("account.signup",{title:"Sign Up",url:"/signup",templateUrl:"/angular/app-components/auth/signup/index.view.html",controller:"SignUp.IndexController",controllerAs:"vm",data:{cssClassnames:"unauth"}}).state("account.verify",{title:"Verify your account",url:"/verify",templateUrl:"/angular/app-components/auth/signup/verify-email/index.view.html",data:{cssClassnames:"unauth"}}).state("account.password_recover",{title:"Recover your password",url:"/password/recover",templateUrl:"/angular/app-components/auth/password/recover/index.view.html",controller:"Password.IndexController",controllerAs:"vm",data:{cssClassnames:"unauth"}}).state("account.password_reset",{title:"Reset your password",url:"/password/reset/:key",templateUrl:"/angular/app-components/auth/password/reset/index.view.html",controller:"Password.IndexController",controllerAs:"vm",data:{cssClassnames:"unauth"}})}function e(o,t,n,e,a,r,s,i){var l=navigator.language.substring(0,2)||navigator.userLanguage.substring(0,2);0===l.length&&""===l||localStorage.setItem("lang",l),o.$state=a,o.$stateParams=r,"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),e.get("user")&&(n.currentUser=JSON.parse(e.get("user")),e.remove("user")),n.currentUser&&(t.defaults.headers.common.Authorization="Bearer "+n.currentUser.token),o.$on("$locationChangeStart",function(t,e,a){!(-1===["/account/login","/account/","/account/signup","/account/verify","/account/password/recover","/account/password/reset/:key"].indexOf(i.path()))||n.currentUser&&!s.isTokenExpired(n.currentUser.token)||i.path("/account/login")}),o.$on("$stateChangeSuccess",function(t,e,a,n,r){o.previousState_name=n.name,o.previousState_params=r,o.title=e.title})}t.$inject=["$qProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$translateProvider"],e.$inject=["$rootScope","$http","$localStorage","$cookies","$state","$stateParams","jwtHelper","$location"],angular.module("app",["ui.router","ngAnimate","ngStorage","ngCookies","angular-jwt","inform","pascalprecht.translate"]).config(t).run(e)}(),function(){"use strict";function t(t,e,a,n,r){var o=this;n.GetById(a.currentUser.id).then(function(t){o.user=t}),o.searchText=null,o.search=function(t){3<=(t=o.searchText).length?e.post("http://localhost:3000/api/search/"+t).then(function(t){o.searchResults=t.data,r.go("dashboard.search")}):r.go("dashboard")},o.logOut=function(){n.Logout(),t.loggedOut=!0,r.go("login")}}t.$inject=["$rootScope","$http","$localStorage","AuthenticationService","$state"],angular.module("app").controller("Dashboard.IndexController",t)}(),function(){"use strict";function t(e,t,a){var n=this;n.login=function(){n.loading=!0,t.Login(n.email,n.password,function(t){!0===t&&e.path("/")}),n.loading=!1},t.Logout()}t.$inject=["$location","AuthenticationService","$timeout"],angular.module("app").controller("Login.IndexController",t)}(),function(){"use strict";function t(t,e){var a=this;a.recover=function(){a.loading=!0,e.recoverPassword(a.email,function(t){t&&(a.mailSent=!0,a.mailSentMsg="A link to reset your password has been sent to provided e-mail address.")}),a.loading=!1},a.reset=function(){},a.mailSent=!1,a.mailSentMsg=""}t.$inject=["$location","AuthenticationService"],angular.module("app").controller("Password.IndexController",t)}(),function(){"use strict";function t(e,t){var a=this;a.signUp=function(){t.SignUp(a.email,a.name,a.password,function(t){!0===t&&e.path("/signup/verify")})}}t.$inject=["$location","AuthenticationService"],angular.module("app").controller("SignUp.IndexController",t)}(),function(){"use strict";function t(t){}t.$inject=["$location"],angular.module("app").controller("Messages.IndexController",t)}(),function(){"use strict";function t(t){t.name="Tatu"}t.$inject=["$scope"],angular.module("app").controller("Profile.IndexController",t)}(),function(){"use strict";function t(r,n){var t={Login:function(t,e,a){r.post("/auth/signin",{user:{email:t,password:e}}).then(function(t){return t.data.user.token?(n.currentUser={id:t.data.user._id,token:t.data.user.token},r.defaults.headers.common.Authorization="Bearer "+t.data.user.token,a(!0)):a(!1)})},Logout:function(){delete n.currentUser,r.defaults.headers.common.Authorization=""},SignUp:function(t,e,a,n){r.post("/api/users",{user:{email:t,name:e,password:a}}).then(function(t){return"OK"==t.data.status?n(!0):n(!1)})},recoverPassword:function(t,e){r.put("/auth/password/recover",{user:{email:t}}).then(function(t){return t.data.errors?e(!1):e(!0)})},GetById:function(t){return r.get("/api/user/"+t).then(a,(e="Error getting user by id",function(){return{error:!0,message:e}}));var e}};return t;function a(t){return t.data}}t.$inject=["$http","$localStorage"],angular.module("app").factory("AuthenticationService",t)}(),function(){"use strict";function t(a,t,e,n){return{response:function(t){return t||a.when(t)},responseError:function(e){return 422==e.status&&angular.forEach(e.data.errors,function(t){n.add(capitalizeFirstLetter(Object.keys(e.data.errors)[0]+" "+t),{type:"alert alert-test animated bounceInLeft"})}),a.reject(e)}}}t.$inject=["$q","$location","$injector","inform"],angular.module("app").factory("StatusInterceptor",t)}(),function(){"use strict";function t(r){return{restrict:"A",scope:{},link:function(t,e,a){t.tgl=function(){e.attr("type","text"===e.attr("type")?"password":"text")};var n=angular.element('<a class="errspan" data-ng-click="tgl()"></a>');r(n)(t),e.wrap('<div class="password-toggle"/>').after(n)}}}t.$inject=["$compile"],angular.module("app").directive("passwordToggle",t)}(),function(){"use strict";function t(n){return{restrict:"A",scope:{},link:function(t,i,e,a){n.$on("$stateChangeSuccess",function(t,e,a,n,r){var o=angular.isDefined(n.data)&&angular.isDefined(n.data.cssClassnames)?n.data.cssClassnames:null,s=angular.isDefined(e.data)&&angular.isDefined(e.data.cssClassnames)?e.data.cssClassnames:null;o!=s&&(o&&i.removeClass(o),s&&i.addClass(s))})}}}t.$inject=["$rootScope"],angular.module("app").directive("routeCssClassnames",t)}();