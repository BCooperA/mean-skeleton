function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}!function(){"use strict";function t(t,e,n,a,r,o,s){t.errorOnUnhandledRejections(!1),r.interceptors.push("StatusInterceptor"),a.html5Mode(!0).hashPrefix("!"),o.useStaticFilesLoader({prefix:"/angular/languages/",suffix:".json"}),o.preferredLanguage("en"),o.useSanitizeValueStrategy("escape");for(var i=0;i<s.length;i++)e.state(s[i].name,s[i].value);n.otherwise("/account/login")}function e(o,t,s,e,n,a,i,u){var r=navigator.language.substring(0,2)||navigator.userLanguage.substring(0,2);0===r.length&&""===r||localStorage.setItem("lang",r),o.$state=n,o.$stateParams=a,"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),e.get("user")&&(s.currentUser=JSON.parse(e.get("user")),e.remove("user")),s.currentUser&&(t.defaults.headers.common.Authorization="Bearer "+s.currentUser.token),o.$on("$stateChangeStart",function(t,e,n,a,r){!e.authenticate||s.currentUser&&!i.isTokenExpired(s.currentUser.token)||(u.path("/account/login"),t.preventDefault())}),o.$on("$stateChangeSuccess",function(t,e,n,a,r){o.previousState_name=a.name,o.previousState_params=r,o.title=e.title})}t.$inject=["$qProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$translateProvider","stateList"],e.$inject=["$rootScope","$http","$localStorage","$cookies","$state","$stateParams","jwtHelper","$location"],angular.module("app",["ui.router","ngAnimate","ngStorage","ngCookies","angular-jwt","inform","pascalprecht.translate"]).config(t).run(e)}(),function(){"use strict";function t(t,e,n,a,r,o){var s=this;a.GetById(n.currentUser.id).then(function(t){s.user=t}),s.searchText=null,s.search=function(t){3<=(t=s.searchText).length?e.post("http://localhost:3000/api/search/"+t).then(function(t){s.searchResults=t.data,r.go("dashboard.search")}):r.go("dashboard")},s.logOut=function(){a.Logout(),t.loggedOut=!0,o.path("/account/login")}}t.$inject=["$rootScope","$http","$localStorage","AuthenticationService","$state","$location"],angular.module("app").controller("Dashboard.IndexController",t)}(),function(){"use strict";function t(e,t,n){var a=this;a.login=function(){a.loading=!0,t.Login(a.email,a.password,function(t){!0===t&&e.path("/app/dashboard")}),a.loading=!1},t.Logout()}t.$inject=["$location","AuthenticationService","$timeout"],angular.module("app").controller("Login.IndexController",t)}(),function(){"use strict";function t(t,e,n){var a=this;a.recover=function(){a.loading=!0,n.recoverPassword(a.email,function(t){!0===t&&(a.mailSent=!0,a.mailSentMsg="A link to reset your password has been sent to provided e-mail address.")}),a.loading=!1},a.reset=function(){console.log(),a.loading=!0,n.resetPassword(t.params.token,a.password,function(t){t&&(a.passwordReset=!0,a.passwordResetMsg="Your password is now changed")}),a.loading=!1},a.mailSent=!1,a.mailSentMsg=""}t.$inject=["$state","$location","AuthenticationService"],angular.module("app").controller("Password.IndexController",t)}(),function(){"use strict";function t(e,t){var n=this;n.signUp=function(){n.loading=!0,n.name=n.firstName+" "+n.surName,console.log(n.name),t.SignUp(n.email,n.name,n.password,function(t){!0===t&&e.path("/account/verify")}),n.loading=!1}}t.$inject=["$location","AuthenticationService"],angular.module("app").controller("SignUp.IndexController",t)}(),function(){"use strict";function t(t){}t.$inject=["$location"],angular.module("app").controller("Messages.IndexController",t)}(),function(){"use strict";function t(t){t.name="Tatu"}t.$inject=["$scope"],angular.module("app").controller("Profile.IndexController",t)}(),function(){"use strict";function t(r,a){var t={Login:function(t,e,n){r.post("/auth/signin",{user:{email:t,password:e}}).then(function(t){return t.data.user.token?(a.currentUser={id:t.data.user._id,token:t.data.user.token},r.defaults.headers.common.Authorization="Bearer "+t.data.user.token,n(!0)):n(!1)})},Logout:function(){delete a.currentUser,r.defaults.headers.common.Authorization=""},SignUp:function(t,e,n,a){r.post("/api/users",{user:{email:t,name:e,password:n}}).then(function(t){return"OK"==t.data.status?a(!0):a(!1)})},recoverPassword:function(t,e){r.put("/account/password/recover",{user:{email:t}}).then(function(t){return"OK"==t.data.status?e(!0):e(!1)})},resetPassword:function(t,e,n){r.put("/account/password/reset/"+t,{user:{password:e}}).then(function(t){return"OK"==t.data.status?n(!0):n(!1)})},GetById:function(t){return r.get("/api/user/"+t).then(n,(e="Error getting user by id",function(){return{error:!0,message:e}}));var e}};return t;function n(t){return t.data}}t.$inject=["$http","$localStorage"],angular.module("app").factory("AuthenticationService",t)}(),function(){"use strict";function t(n,t,e,a){return{response:function(t){return t||n.when(t)},responseError:function(e){return 422==e.status&&angular.forEach(e.data.errors,function(t){a.add(capitalizeFirstLetter(Object.keys(e.data.errors)[0]+" "+t),{type:"alert alert-danger"})}),n.reject(e)}}}t.$inject=["$q","$location","$injector","inform"],angular.module("app").factory("StatusInterceptor",t)}(),function(){"use strict";function t(r){return{restrict:"A",scope:{},link:function(t,e,n){t.tgl=function(){e.attr("type","text"===e.attr("type")?"password":"text")};var a=angular.element('<a class="errspan" data-ng-click="tgl()"></a>');r(a)(t),e.wrap('<div class="password-toggle"/>').after(a)}}}t.$inject=["$compile"],angular.module("app").directive("passwordToggle",t)}(),function(){"use strict";function t(a){return{restrict:"A",scope:{},link:function(t,i,e,n){a.$on("$stateChangeSuccess",function(t,e,n,a,r){var o=angular.isDefined(a.data)&&angular.isDefined(a.data.cssClassnames)?a.data.cssClassnames:null,s=angular.isDefined(e.data)&&angular.isDefined(e.data.cssClassnames)?e.data.cssClassnames:null;o!=s&&(o&&i.removeClass(o),s&&i.addClass(s))})}}}t.$inject=["$rootScope"],angular.module("app").directive("routeCssClassnames",t)}(),function(){"use strict";angular.module("app").directive("sameAs",function(){return{require:"ngModel",link:function(n,t,a,r){r.$parsers.unshift(function(t){var e=n.$eval(a.sameAs)==t;return r.$setValidity("same-as",e),e?t:void 0}),n.$watch(a.sameAs,function(){r.$setViewValue(r.$viewValue)})}}})}(),function(){"use strict";function t(r,o){return{require:"ngModel",link:function(t,e,n,a){a.$asyncValidators.emailExists=function(t,e){return r.post("/account/email",{user:{email:e}}).then(function(t){return!1!==t.data.valid||o.reject()})}}}}t.$inject=["$http","$q"],angular.module("app").directive("uniqueEmail",t)}();