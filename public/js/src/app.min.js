function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}!function(){"use strict";function e(e,t,r,n,o,a,c){e.errorOnUnhandledRejections(!1),o.interceptors.push("StatusInterceptor"),n.html5Mode(!0).hashPrefix("!"),a.useStaticFilesLoader({prefix:"/angular/languages/",suffix:".json"}),a.preferredLanguage("en"),a.useSanitizeValueStrategy("escape");for(var i=0;i<c.length;i++)t.state(c[i].name,c[i].value);r.otherwise("/account/login")}function t(a,e,c,t,i,r,s){var n=navigator.language.substring(0,2)||navigator.userLanguage.substring(0,2);0===n.length&&""===n||localStorage.setItem("lang",n),a.$state=i,a.$stateParams=r,"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),t.get("user")&&(c.currentUser=JSON.parse(t.get("user")),t.remove("user")),c.currentUser&&(e.defaults.headers.common.Authorization="Bearer "+c.currentUser.token),a.$on("$stateChangeStart",function(e,t,r,n,o){!t.authenticate||c.currentUser&&!s.isTokenExpired(c.currentUser.token)||(e.preventDefault(),a.bodylayout="",i.go("account.login"))}),a.$on("$stateChangeSuccess",function(e,t,r,n,o){a.previousState_name=n.name,a.previousState_params=o,a.title=t.title})}e.$inject=["$qProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$translateProvider","stateList"],t.$inject=["$rootScope","$http","$localStorage","$cookies","$state","$stateParams","jwtHelper"],angular.module("app",["ui.router","ngAnimate","ngStorage","ngCookies","angular-jwt","inform","pascalprecht.translate"]).config(e).run(t)}(),function(){"use strict";angular.module("app").constant("stateList",[{name:"dashboard",value:{abstract:!0,templateUrl:"/angular/app-components/dashboard/dashboard.view.html",controller:"Dashboard.IndexController",controllerAs:"vm",authenticate:!0}},{name:"dashboard.app",value:{title:"Dashboard",url:"/app/dashboard",templateUrl:"/angular/app-components/dashboard/app/index.view.html",authenticate:!0}},{name:"dashboard.profile",value:{title:"Profile",url:"/app/account/:id",templateUrl:"/angular/app-components/dashboard/profile/index.view.html",controller:"Profile.IndexController",controllesAs:"vm",authenticate:!0}},{name:"dashboard.messages",value:{title:"Messages",url:"/app/messages",templateUrl:"/angular/app-components/dashboard/messages/index.view.html",controller:"Messages.IndexController",controllerAs:"vm",authenticate:!0}},{name:"dashboard.search",value:{title:"Search",url:"/app/search/:keyword",templateUrl:"/angular/app-components/dashboard/search/index.view.html",authenticate:!0}},{name:"account",value:{templateUrl:"/angular/app-components/auth/index.view.html",abstract:!0}},{name:"account.login",value:{title:"Sign in",url:"/account/login",templateUrl:"/angular/app-components/auth/login/index.view.html",controllerAs:"vm",controller:"Login.IndexController"}},{name:"account.signup",value:{title:"Sign up",url:"/account/signup",templateUrl:"/angular/app-components/auth/signup/index.view.html",controllerAs:"vm",controller:"SignUp.IndexController"}},{name:"account.verify",value:{title:"Verify account",url:"/account/verify",templateUrl:"/angular/app-components/auth/signup/verify-email/index.view.html"}},{name:"account.recover",value:{title:"Recover account",url:"/account/recover",templateUrl:"/angular/app-components/auth/password/recover/index.view.html",controller:"Password.IndexController",controllerAs:"vm",data:{cssClassNames:"unauth"}}},{name:"account.reset",value:{title:"Reset account",url:"/account/reset/:token",templateUrl:"/angular/app-components/auth/password/reset/index.view.html",controller:"Password.IndexController",controllerAs:"vm"}}])}(),function(){"use strict";function e(t,e,r){e.changeLanguage=function(e){localStorage.removeItem("lang"),localStorage.setItem("lang",e),r.lang=e,t.use(e)}}e.$inject=["$translate","$scope","$rootScope"],angular.module("app").controller("MainController",e).controller.$inject=["$translate","$scope","$rootScope"]}(),function(){"use strict";function e(e,t,r,n,o,a){var c=this;c.searchText=null,c.search=function(){if(3<=c.searchText.length){var e=c.searchText;SearchService.getByKeyword(e).then(function(e){c.searchResults=e,n.go("dashboard.search")})}else n.go("dashboard.app")},c.logOut=function(){t.Logout(),a.bodylayout="",n.go("account.login")},r.getUser(o.currentUser.id).then(function(e){c.user=e}),a.bodylayout="dashboard"}e.$inject=["$http","AuthenticationService","AccountService","$state","$localStorage","$rootScope"],angular.module("app").controller("Dashboard.IndexController",e).controller.$inject=["$http","AuthenticationService","AccountService","$state","$localStorage","$rootScope"]}(),function(){"use strict";function e(e,t,r,n,o,a,c){var i=this;i.loading=!1,i.login=function(){i.loading=!0,r.Login(i.email,i.password,function(e){!0===e&&(i.loading=!1,c.go("dashboard.app"))}),i.loading=!1},r.Logout()}e.$inject=["$location","$rootScope","AuthenticationService","$timeout","$translate","$localStorage","$state"],angular.module("app").controller("Login.IndexController",e).controller.$inject=["$location","$rootScope","AuthenticationService","$timeout","$translate","$localStorage","$state"]}(),function(){"use strict";function e(e,t,r){var n=this;n.loading=!1,n.mailSent=!1,n.mailSentMsg="",n.recover=function(){n.loading=!0,r.recoverPassword(n.email,function(e){!0===e&&(n.loading=!1,n.mailSent=!0,n.mailSentMsg="A link to reset your password has been sent to provided e-mail address.")}),n.loading=!1},n.reset=function(){n.loading=!0,r.resetPassword(e.params.token,n.password,n.passwordVrf,function(e){e&&(n.loading=!1,n.passwordReset=!0,n.passwordResetMsg="Your password is now changed")}),n.loading=!1}}e.$inject=["$state","$location","AuthenticationService"],angular.module("app").controller("Password.IndexController",e).controller.$inject=["$state","$location","AuthenticationService"]}(),function(){"use strict";function e(t,e,r){var n=this;n.signUp=function(){r.loading=!0,n.loading=!0,n.name=n.firstName+" "+n.surName,e.SignUp(n.email,n.name,n.password,function(e){!0===e&&t.go("account.verify")}),r.loading=!1}}e.$inject=["$state","AuthenticationService","$rootScope"],angular.module("app").controller("SignUp.IndexController",e).controller.$inject=["$state","AuthenticationService","$rootScope"]}(),function(){"use strict";function e(e,t){var r=this;console.log("HEllo!"),r.message="Hello!"}e.$inject=["$localStorage","AccountService"],angular.module("app").controller("Messages.IndexController",e).controller.$inject=["$localStorage","AccountService"]}(),function(){"use strict";function e(e,t,r){var n=this;e.getUser(t.id).then(function(e){n.user=e,r.title=n.user.name})}e.$inject=["AccountService","$stateParams","$rootScope"],angular.module("app").controller("Profile.IndexController",e).controller.$inject=["AccountService","$stateParams","$rootScope"]}(),function(){"use strict";function e(t,r){var n=this;n.searchText=null,n.search=function(){if(3<=n.searchText.length){var e=n.searchText;t.getByKeyword(e).then(function(e){n.searchResults=e,r.go("dashboard.search")})}else r.go("dashboard.app")}}e.$inject=["SearchService","$state"],angular.module("app").controller("Search.IndexController",e).controller.$inject=["SearchService","$state"]}(),function(){"use strict";function e(o){return{restrict:"A",scope:{},link:function(e,t,r){e.tgl=function(){t.attr("type","text"===t.attr("type")?"password":"text")};var n=angular.element('<a class="pwd-toggle" data-ng-click="tgl()"></a>');o(n)(e),t.wrap('<div class="password-toggle"/>').after(n)}}}e.$inject=["$compile"],angular.module("app").directive("passwordToggle",e).directive.$inject=["$compile"]}(),function(){"use strict";angular.module("app").directive("sameAs",function(){return{require:"ngModel",link:function(r,e,n,o){o.$parsers.unshift(function(e){var t=r.$eval(n.sameAs)==e;return o.$setValidity("same-as",t),t?e:void 0}),r.$watch(n.sameAs,function(){o.$setViewValue(o.$viewValue)})}}})}(),function(){"use strict";function e(o,a){return{require:"ngModel",link:function(e,t,r,n){n.$asyncValidators.emailExists=function(e,t){return o.post("/account/email",{user:{email:t}}).then(function(e){return!1!==e.data.valid||a.reject()})}}}}e.$inject=["$http","$q"],angular.module("app").directive("uniqueEmail",e).directive.$inject=["$http","$q"]}(),function(){"use strict";function e(t){var e={getUser:function(e){return t.get("/api/user/"+e).then(function(e){if(e.data)return e.data})}};return e}e.$inject=["$http"],angular.module("app").factory("AccountService",e).factory.$inject=["$http"]}(),function(){"use strict";function e(o,n){var e={Login:function(e,t,r){o.post("/auth/signin",{user:{email:e,password:t}}).then(function(e){return 200==e.status&&e.data.user.token?(n.currentUser={id:e.data.user._id,token:e.data.user.token},o.defaults.headers.common.Authorization="Bearer "+e.data.user.token,r(!0)):r(!1)})},Logout:function(){delete n.currentUser,o.defaults.headers.common.Authorization=""},SignUp:function(e,t,r,n){o.post("/api/users",{user:{email:e,name:t,password:r}}).then(function(e){return 200===e.status&&"OK"===e.data.status?n(!0):n(!1)})},recoverPassword:function(e,t){o.put("/account/password/recover",{user:{email:e}}).then(function(e){return 200===e.status&&"OK"===e.data.status?t(!0):t(!1)})},resetPassword:function(e,t,r,n){o.put("/account/password/reset/"+e,{user:{password:t,passwordVrf:r}}).then(function(e){return 200===e.status&&"OK"===e.data.status?n(!0):n(!1)})}};return e}e.$inject=["$http","$localStorage"],angular.module("app").factory("AuthenticationService",e).factory.$inject=["$http","$localStorage"]}(),function(){"use strict";function e(t,e,r,n,o){return{response:function(e){return e||t.when(e)},responseError:function(e){return 401==e.status&&(r.bodylayout="",$state.go("account.login")),422==e.status&&""!==e.data.error&&(o.clear(),o.add(e.data.error,{ttl:0,type:"danger"})),t.reject(e)}}}e.$inject=["$q","$location","$rootScope","$injector","inform"],angular.module("app").factory("StatusInterceptor",e).factory.$inject=["$q","$location","$rootScope","$injector","inform"]}(),function(){"use strict";function e(t,r,e){var n=0,o=0;function a(){e.loading=o<n}return{request:function(e){return n++,a(),e},requestError:function(e){return o++,a(),r.error("Request error:",e),t.reject(e)},response:function(e){return o++,a(),e},responseError:function(e){return o++,a(),r.error("Response error:",e),t.reject(e)}}}e.$inject=["$q","$log","$rootScope"],angular.module("app").factory("LoadingInterceptor",e).factory.$inject=["$q","$log","$rootScope"]}(),function(){"use strict";function e(r){var e={getByKeyword:function(e){return r.post("/api/search/"+e).then(n,(t="Error getting user by id",function(){return{error:!0,message:t}}));var t}};return e;function n(e){return e.data}}e.$inject=["$http"],angular.module("app").factory("SearchService",e).factory.$inject=["$http"]}();