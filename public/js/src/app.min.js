function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}!function(){"use strict";function t(t,e,n,r,a,o,i){t.errorOnUnhandledRejections(!1),a.interceptors.push("StatusInterceptor"),r.html5Mode(!0).hashPrefix("!"),o.useStaticFilesLoader({prefix:"/angular/languages/",suffix:".json"}),o.preferredLanguage("en"),o.useSanitizeValueStrategy("escape");for(var s=0;s<i.length;s++)e.state(i[s].name,i[s].value);n.otherwise("/account/login")}function e(o,t,i,e,s,n,u,r){var a=navigator.language.substring(0,2)||navigator.userLanguage.substring(0,2);0===a.length&&""===a||localStorage.setItem("lang",a),o.$state=s,o.$stateParams=n,"#_=_"==window.location.hash&&(history.replaceState?history.replaceState(null,null,window.location.href.split("#")[0]):window.location.hash=""),e.get("user")&&(i.currentUser=JSON.parse(e.get("user")),e.remove("user")),i.currentUser&&(t.defaults.headers.common.Authorization="Bearer "+i.currentUser.token),o.$on("$stateChangeStart",function(t,e,n,r,a){!e.authenticate||i.currentUser&&!u.isTokenExpired(i.currentUser.token)||(t.preventDefault(),s.go("account.login"))}),o.$on("$stateChangeSuccess",function(t,e,n,r,a){o.previousState_name=r.name,o.previousState_params=a,o.title=e.title})}t.$inject=["$qProvider","$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider","$translateProvider","stateList"],e.$inject=["$rootScope","$http","$localStorage","$cookies","$state","$stateParams","jwtHelper","$location"],angular.module("app",["ui.router","ngAnimate","ngStorage","ngCookies","angular-jwt","inform","pascalprecht.translate"]).config(t).run(e)}(),function(){"use strict";function t(t,e,n,r,a,o){var i=this;i.searchText=null,i.search=function(){if(3<=i.searchText.length){var t=i.searchText;SearchService.getByKeyword(t).then(function(t){i.searchResults=t,r.go("dashboard.search")})}else r.go("dashboard.app")},i.logOut=function(){e.Logout(),o.bodylayout="",r.go("account.login")},n.getUser(a.currentUser.id).then(function(t){i.user=t}),o.bodylayout="dashboard"}t.$inject=["$http","AuthenticationService","AccountService","$state","$localStorage","$rootScope"],angular.module("app").controller("Dashboard.IndexController",t)}(),function(){"use strict";function t(t,e,n,r,a,o){var i=this;i.login=function(){i.loading=!0,e.Login(i.email,i.password,function(t){!0===t&&o.go("dashboard.app")}),i.loading=!1},e.Logout()}t.$inject=["$location","AuthenticationService","$timeout","$translate","$localStorage","$state"],angular.module("app").controller("Login.IndexController",t)}(),function(){"use strict";function t(t,e,n){var r=this;r.recover=function(){r.loading=!0,n.recoverPassword(r.email,function(t){!0===t&&(r.mailSent=!0,r.mailSentMsg="A link to reset your password has been sent to provided e-mail address.")}),r.loading=!1},r.reset=function(){r.loading=!0,n.resetPassword(t.params.token,r.password,function(t){t&&(r.passwordReset=!0,r.passwordResetMsg="Your password is now changed")}),r.loading=!1},r.mailSent=!1,r.mailSentMsg=""}t.$inject=["$state","$location","AuthenticationService"],angular.module("app").controller("Password.IndexController",t)}(),function(){"use strict";function t(e,t){var n=this;n.signUp=function(){n.loading=!0,n.name=n.firstName+" "+n.surName,console.log(n.name),t.SignUp(n.email,n.name,n.password,function(t){!0===t&&e.path("/account/verify")}),n.loading=!1}}t.$inject=["$location","AuthenticationService"],angular.module("app").controller("SignUp.IndexController",t)}(),function(){"use strict";function t(t,e){var n=this;console.log("HEllo!"),n.message="Hello!"}t.$inject=["$localStorage","AccountService"],angular.module("app").controller("Messages.IndexController",t).$inject=["$localStorage","AccountService"]}(),function(){"use strict";function t(t,e,n){var r=this;t.getUser(e.id).then(function(t){r.user=t,n.title=r.user.name})}t.$inject=["AccountService","$stateParams","$rootScope"],angular.module("app").controller("Profile.IndexController",t)}(),function(){"use strict";function t(e,n){var r=this;r.searchText=null,r.search=function(){if(3<=r.searchText.length){var t=r.searchText;e.getByKeyword(t).then(function(t){r.searchResults=t,n.go("dashboard.search")})}else n.go("dashboard.app")}}t.$inject=["SearchService","$state"],angular.module("app").controller("Search.IndexController",t)}(),function(){"use strict";function t(e){var t={getUser:function(t){return e.get("/api/user/"+t).then(function(t){if(t.data)return t.data})}};return t}t.$inject=["$http"],angular.module("app").factory("AccountService",t)}(),function(){"use strict";function t(a,r){var t={Login:function(t,e,n){a.post("/auth/signin",{user:{email:t,password:e}}).then(function(t){return 200==t.status&&t.data.user.token?(r.currentUser={id:t.data.user._id,token:t.data.user.token},a.defaults.headers.common.Authorization="Bearer "+t.data.user.token,n(!0)):n(!1)})},Logout:function(){delete r.currentUser,a.defaults.headers.common.Authorization=""},SignUp:function(t,e,n,r){a.post("/api/users",{user:{email:t,name:e,password:n}}).then(function(t){return 200===t.status&&"OK"===t.data.status?r(!0):r(!1)})},recoverPassword:function(t,e){a.put("/account/password/recover",{user:{email:t}}).then(function(t){return 200===t.status&&"OK"===t.data.status?e(!0):e(!1)})},resetPassword:function(t,e,n){a.put("/account/password/reset/"+t,{user:{password:e}}).then(function(t){return 200===t.status&&"OK"===t.data.status?n(!0):n(!1)})}};return t}t.$inject=["$http","$localStorage"],angular.module("app").factory("AuthenticationService",t)}(),function(){"use strict";function t(n,t,r,e,a){return{response:function(t){return t||n.when(t)},responseError:function(e){return 401==e.status&&(r.bodyLayout="",t.path("/account/login")),422==e.status&&angular.forEach(e.data.errors,function(t){a.add(capitalizeFirstLetter(Object.keys(e.data.errors)[0]+" "+t),{type:"alert alert-danger"})}),n.reject(e)}}}t.$inject=["$q","$location","$rootScope","$injector","inform"],angular.module("app").factory("StatusInterceptor",t)}(),function(){"use strict";function t(n){var t={getByKeyword:function(t){return n.post("/api/search/"+t).then(r,(e="Error getting user by id",function(){return{error:!0,message:e}}));var e}};return t;function r(t){return t.data}}t.$inject=["$http"],angular.module("app").factory("SearchService",t).$inject=["$http"]}(),function(){"use strict";function t(a){return{restrict:"A",scope:{},link:function(t,e,n){t.tgl=function(){e.attr("type","text"===e.attr("type")?"password":"text")};var r=angular.element('<a class="errspan" data-ng-click="tgl()"></a>');a(r)(t),e.wrap('<div class="password-toggle"/>').after(r)}}}t.$inject=["$compile"],angular.module("app").directive("passwordToggle",t)}(),function(){"use strict";angular.module("app").directive("sameAs",function(){return{require:"ngModel",link:function(n,t,r,a){a.$parsers.unshift(function(t){var e=n.$eval(r.sameAs)==t;return a.$setValidity("same-as",e),e?t:void 0}),n.$watch(r.sameAs,function(){a.$setViewValue(a.$viewValue)})}}})}(),function(){"use strict";function t(a,o){return{require:"ngModel",link:function(t,e,n,r){r.$asyncValidators.emailExists=function(t,e){return a.post("/account/email",{user:{email:e}}).then(function(t){return!1!==t.data.valid||o.reject()})}}}}t.$inject=["$http","$q"],angular.module("app").directive("uniqueEmail",t)}();